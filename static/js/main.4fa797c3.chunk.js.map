{"version":3,"sources":["images/header-logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Loader.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/api.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","src","headerLogoPath","alt","CurrentUserContext","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","type","aria-label","onClick","link","name","length","Loader","Main","onEditAvatar","onEditProfile","onAddPlace","cards","isCardsLoading","avatar","about","map","Footer","Date","getFullYear","PopupWithForm","title","buttonText","children","isOpen","onClose","onSubmit","noValidate","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","autoComplete","required","minLength","maxLength","value","undefined","onChange","target","id","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","placeholder","ref","AddPlacePopup","setLink","ImagePopup","api","token","url","cohortId","this","_token","_url","_cohortId","res","ok","json","Promise","reject","status","fetch","headers","authorization","then","checkResponse","method","body","JSON","stringify","cardId","isLike","userData","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","selectedCard","setSelectedCard","setIsCardsLoading","setCurrentUser","all","getUserInfo","getCards","cardData","setCards","catch","err","console","log","finally","closeAllPopups","Provider","changeLikeCardStatus","newCard","state","c","deleteCard","filter","newAvatarUrl","updataAvatar","data","userInfo","setUserInfo","newUserInfo","addCard","addedNewCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4fa797c3.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/header-logo.c2821b38.svg\";","import headerLogoPath from '../images/header-logo.svg';\r\n\r\nexport function Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <img className=\"header__logo\" src={headerLogoPath} alt=\"Логотип Mesto Russia\" />\r\n    </header>\r\n  )\r\n}\r\n","import {\r\n  createContext\r\n} from 'react';\r\nexport const CurrentUserContext = createContext();\r\n","import React, { useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nexport function Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = card.owner._id === currentUser._id;\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n  const cardDeleteButtonClassName = (\r\n    `place-card__delete-button ${isOwn ? 'place-card__delete-button_visible.css' : 'place-card__delete-button_hidden'}`\r\n  );\r\n\r\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n  const cardLikeButtonClassName = `place-card__like-button ${isLiked && 'place-card__like-button_active'}`;\r\n\r\n  const handelClick = () => {\r\n    onCardClick(card);\r\n  }\r\n\r\n  const handleLikeClick = () => {\r\n    onCardLike(card);\r\n  }\r\n\r\n  const handleDeleteClick = () => {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <li className=\"place-card\">\r\n      <button\r\n        type=\"button\"\r\n        aria-label=\"Удалить карточку\"\r\n        className={cardDeleteButtonClassName}\r\n        onClick={handleDeleteClick}\r\n      />\r\n      <img className=\"place-card__photo\" src={card.link}\r\n        alt={card.name} onClick={handelClick} />\r\n      <div className=\"place-card__photo-description\">\r\n        <h2 className=\"place-card__photo-name\">{card.name}</h2>\r\n        <div className=\"place-card__like-section\">\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Поставить лайк\"\r\n            className={cardLikeButtonClassName}\r\n            onClick={handleLikeClick}\r\n          />\r\n          <span className=\"place-card__like-count\">{card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n","export function Loader() {\r\n  return(\r\n    <div className=\"loader\">\r\n      <div className=\"loader__circle\">\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useContext } from 'react';\r\nimport { Card } from './Card';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { Loader} from './Loader';\r\n\r\nexport function Main({\r\n  onEditAvatar,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  cards,\r\n  onCardClick,\r\n  onCardLike,\r\n  onCardDelete,\r\n  isCardsLoading\r\n}) {\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"profile\">\r\n        <div className=\"profile__information\">\r\n          <div className=\"profile__avatar\">\r\n            <img className=\"profile__avatar-picture\" src={currentUser.avatar}\r\n              alt={currentUser.name} />\r\n            <button\r\n              type=\"button\"\r\n              aria-label=\"Изменить изображение профиля\"\r\n              className=\"profile__avatar-edit\"\r\n              onClick={onEditAvatar}\r\n            />\r\n          </div>\r\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n          <p className=\"profile__description\">{currentUser.about}</p>\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Редактировать информацию профиля\"\r\n            className=\"profile__edit-button\"\r\n            onClick={onEditProfile}\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Добавить новую карточку\"\r\n            className=\"profile__add-button\"\r\n            onClick={onAddPlace}\r\n          />\r\n        </div>\r\n      </section>\r\n      <section className=\"galery\">\r\n\r\n        {isCardsLoading && <Loader />}\r\n\r\n        <ul className=\"galery__places\">\r\n          {cards.map((card) => (\r\n            <Card\r\n              key={card._id}\r\n              card={card}\r\n              onCardClick={onCardClick}\r\n              onCardLike={onCardLike}\r\n              onCardDelete={onCardDelete}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","export function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; {new Date().getFullYear()} Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nexport function PopupWithForm({ name, title, buttonText, children, isOpen, onClose, onSubmit }) {\r\n\r\n  //TODO: Доделать закрытие по Esc и оверлею\r\n\r\n  return (\r\n    <section className={`popup popup_type_${name} ${isOpen && \"popup_opened\"}`}>\r\n      <div className=\"popup__container popup__container_profile\">\r\n        <form name={name} noValidate onSubmit={onSubmit}>\r\n          <h3 className=\"popup__title\">{title}</h3>\r\n          {children}\r\n          <button type=\"submit\" className=\"popup__save-button popup__save-button_profile\">{buttonText}</button>\r\n        </form>\r\n        <button type=\"button\" aria-label=\"Закрыть окно\" className=\"popup__close-button\" onClick={onClose} />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","import { useState, useEffect, useContext } from 'react';\r\nimport { PopupWithForm } from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nexport function EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n\r\n  const [name, setName] = useState('');\r\n  const [description, setDescription] = useState('');\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, isOpen])\r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile-edit\"\r\n      title=\"Редактировать профиль\"\r\n      buttonText=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <div className=\"popup__inputs\">\r\n\r\n        <input\r\n          type=\"text\"\r\n          name=\"name-of-user\"\r\n          className=\"popup__input popup__input_type_name\"\r\n          autoComplete=\"off\"\r\n          required\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          value={name === undefined ? \"\" : name}\r\n          onChange={handleNameChange}\r\n        />\r\n\r\n        <span className=\"popup__error-message\" id=\"name-of-user-error\" />\r\n\r\n        <input\r\n          type=\"text\"\r\n          name=\"description\"\r\n          className=\"popup__input popup__input_type_description\"\r\n          autoComplete=\"off\"\r\n          required\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          value={description === undefined ? \"\" : description}\r\n          onChange={handleDescriptionChange}\r\n        />\r\n\r\n        <span className=\"popup__error-message\" id=\"description-error\"></span>\r\n      </div>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import { PopupWithForm } from './PopupWithForm';\r\nimport { useRef, useEffect, useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nexport function EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n\r\n  const avatarRef = useRef();\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    // Передаём значениe во внешний обработчик\r\n    onUpdateAvatar(avatarRef.current.value);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"update-avatar\"\r\n      title=\"Обновить аватар\"\r\n      buttonText=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <div className=\"popup__inputs\">\r\n        <input\r\n          type=\"url\"\r\n          name=\"avatar-url\"\r\n          className=\"popup__input popup__input_type_avatar-url\"\r\n          autoComplete=\"off\"\r\n          placeholder=\"url\"\r\n          required minLength=\"2\"\r\n          maxLength=\"\"\r\n          ref={avatarRef}\r\n        />\r\n        <span className=\"popup__error-message\" id=\"avatar-url-error\" />\r\n      </div>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import { useState, useEffect, useContext } from 'react';\r\nimport { PopupWithForm } from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nexport function AddPlacePopup({ isOpen, onClose, onAddPlace }) {\r\n\r\n  const [name, setName] = useState('');\r\n  const [link, setLink] = useState('');\r\n\r\n  const handleNameChange = (e) => {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  const handleLinkChange = (e) => {\r\n    setLink(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace({ name, link });\r\n  }\r\n\r\n  useEffect(() => {\r\n    setName(\"\");\r\n    setLink(\"\");\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"add-card\"\r\n      title=\"Новое место\"\r\n      buttonText=\"Создать\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <div className=\"popup__inputs\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"name-of-place\"\r\n          className=\"popup__input popup__input_type_place-name\"\r\n          autoComplete=\"off\"\r\n          placeholder=\"Название\"\r\n          required minLength=\"2\"\r\n          maxLength=\"30\"\r\n          value={name || \"\"}\r\n          onChange={handleNameChange}\r\n        />\r\n        <span className=\"popup__error-message\" id=\"name-of-place-error\" />\r\n        <input\r\n          type=\"url\"\r\n          name=\"image-url\"\r\n          className=\"popup__input popup__input_type_image-link\"\r\n          autoComplete=\"off\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          required\r\n          value={link || \"\"}\r\n          onChange={handleLinkChange}\r\n        />\r\n        <span className=\"popup__error-message\" id=\"image-url-error\" />\r\n      </div>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","export function ImagePopup({ card, onClose }) {\r\n\r\n  return (\r\n    <section className={`popup ${card && \"popup_opened\"}`} id=\"fullSizeImage\">\r\n      <div className=\"popup__image-container\">\r\n        <figure className=\"popup__image-group\">\r\n          <img className=\"popup__image\" src={card != null ? card.link : undefined} alt={card?.name} />\r\n          <figcaption className=\"popup__image-title\">{card?.name}</figcaption>\r\n        </figure>\r\n        <button type=\"button\" aria-label=\"Закрыть окно\" className=\"popup__close-button\" onClick={onClose}></button>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","export default class Api {\r\n  constructor(token, url, cohortId) {\r\n    this._token = token;\r\n    this._url = url;\r\n    this._cohortId = cohortId;\r\n  }\r\n\r\n  //проверяем ответ сервера\r\n  checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    // если ошибка, отклоняем промис\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  //Получаем карточки с сервера\r\n  getCards() {\r\n    return fetch(`${this._url}${this._cohortId}/cards`, {\r\n        headers: {\r\n          authorization: this._token\r\n        }\r\n      })\r\n      .then(this.checkResponse)\r\n  }\r\n\r\n  //Добавляем карточку на сервер\r\n  addCard({\r\n    name,\r\n    link\r\n  }) {\r\n    return fetch(`${this._url}${this._cohortId}/cards`, {\r\n        method: 'POST',\r\n        headers: {\r\n          authorization: this._token,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          name,\r\n          link\r\n        })\r\n      })\r\n      .then(this.checkResponse)\r\n  }\r\n\r\n  //Метод удаления карточки\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._url}${this._cohortId}/cards/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          authorization: this._token\r\n        }\r\n      })\r\n      .then(this.checkResponse);\r\n  }\r\n\r\n  //Метод изменения статуса лайка\r\n  changeLikeCardStatus(cardId, isLike) {\r\n    return fetch(`${this._url}/${this._cohortId}/cards/likes/${cardId}`, {\r\n        method: isLike ? 'PUT' : 'DELETE',\r\n        headers: {\r\n          authorization: this._token,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      })\r\n      .then(this.checkResponse);\r\n  }\r\n\r\n  //Получаем данные пользователя с сервера\r\n  getUserInfo() {\r\n    return fetch(`${this._url}${this._cohortId}/users/me`, {\r\n        headers: {\r\n          authorization: this._token\r\n        }\r\n      })\r\n      .then(this.checkResponse);\r\n  }\r\n\r\n  //Отправляем данные пользователя на сервер\r\n  setUserInfo(userData) {\r\n    return fetch(`${this._url}${this._cohortId}/users/me`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          authorization: this._token,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(userData)\r\n      })\r\n      .then(this.checkResponse)\r\n  }\r\n\r\n  //Обновляем аватар пользователя\r\n  updataAvatar(avatar) {\r\n    return fetch(`${this._url}${this._cohortId}/users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          authorization: this._token,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(avatar)\r\n      })\r\n      .then(this.checkResponse)\r\n  }\r\n}\r\n\r\nexport const api = new Api('233fa192-0365-43b1-9635-9ca57a07d48d', 'https://mesto.nomoreparties.co/v1/', 'cohort-20');\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport { Header } from './Header';\r\nimport { Main } from './Main';\r\nimport { Footer } from './Footer';\r\nimport { PopupWithForm } from './PopupWithForm';\r\nimport { EditProfilePopup } from './EditProfilePopup';\r\nimport { EditAvatarPopup } from './EditAvatarPopup';\r\nimport { AddPlacePopup } from './AddPlacePopup';\r\nimport { ImagePopup } from './ImagePopup';\r\n\r\nimport { api } from '../utils/api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction App() {\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isCardsLoading, setIsCardsLoading] = useState(false);\r\n\r\n  //Стейт данных текущего пользователя\r\n  const [currentUser, setCurrentUser] = useState({});\r\n\r\n  useEffect(() => {\r\n    setIsCardsLoading(true);\r\n    Promise.all([api.getUserInfo(), api.getCards()])\r\n      .then(([userData, cardData]) => {\r\n        setCurrentUser(userData);\r\n        setCards(cardData);\r\n      }).catch(err => console.log(err)).finally(() => {\r\n        setIsCardsLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const handleEditAvatarClick = () => {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n  const handleEditProfileClick = () => {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n  const handleAddPlaceClick = () => {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  const closeAllPopups = () => {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setSelectedCard(null);\r\n  }\r\n\r\n  const handleUpdateUser = (userInfo) => {\r\n    api.setUserInfo(userInfo).then((newUserInfo) => {\r\n      setCurrentUser(newUserInfo);\r\n      closeAllPopups();\r\n    }).catch(err => console.log(err));\r\n  }\r\n\r\n  const handleUpdateAvatar = (newAvatarUrl) => {\r\n    api.updataAvatar({ avatar: newAvatarUrl }).then((data) => {\r\n      setCurrentUser(data);\r\n      console.log(currentUser);\r\n      closeAllPopups();\r\n    }).catch(err => console.log(err));\r\n  }\r\n\r\n  const [cards, setCards] = useState([]);\r\n\r\n  function handleCardLike(card) {\r\n    // Снова проверяем, есть ли уже лайк на этой карточке\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    // Отправляем запрос в API и получаем обновлённые данные карточки\r\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\r\n      setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\r\n    }).catch(err => console.log(err));\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id).then(\r\n      () => {\r\n        setCards((state) => {\r\n          return state.filter((c) => c._id !== card._id);\r\n        });\r\n      }\r\n    ).catch(err => console.log(err));\r\n  }\r\n\r\n  const handleAddPlaceSubmit = (newCard) => {\r\n    api.addCard(newCard).then((addedNewCard) => {\r\n      setCards([addedNewCard, ...cards])\r\n    }).then(() => {\r\n      closeAllPopups();\r\n    }).catch(err => console.log(err));\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"App\">\r\n        <div className=\"page\">\r\n          <div className=\"page__content\">\r\n            <Header />\r\n\r\n            <Main\r\n              onEditAvatar={handleEditAvatarClick}\r\n              onEditProfile={handleEditProfileClick}\r\n              onAddPlace={handleAddPlaceClick}\r\n              onCardClick={handleCardClick}\r\n              cards={cards}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={handleCardDelete}\r\n              isCardsLoading={isCardsLoading}\r\n            />\r\n\r\n            <Footer />\r\n\r\n            <EditAvatarPopup\r\n              isOpen={isEditAvatarPopupOpen}\r\n              onClose={closeAllPopups}\r\n              onUpdateAvatar={handleUpdateAvatar}\r\n            />\r\n\r\n            <EditProfilePopup\r\n              isOpen={isEditProfilePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onUpdateUser={handleUpdateUser}\r\n            />\r\n\r\n            <AddPlacePopup\r\n              isOpen={isAddPlacePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onAddPlace={handleAddPlaceSubmit}\r\n            />\r\n\r\n            <PopupWithForm name=\"delete-confirm\" title=\"Вы уверены?\" buttonText=\"Да\" onClose={closeAllPopups} />\r\n\r\n            <ImagePopup\r\n              card={selectedCard}\r\n              onClose={closeAllPopups}\r\n            />\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}